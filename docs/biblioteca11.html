<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>Menutech Component Playground</title>
  <style>
    body {
      font-family: system-ui, sans-serif;
      background: #f7f7f7;
      margin: 0;
      padding: 2em;
    }

    h1 {
      text-align: center;
      margin-bottom: 1.5em;
    }

    .search {
      display: flex;
      justify-content: center;
      margin-bottom: 2em;
    }

    .search input {
      width: 300px;
      padding: 10px 15px;
      border-radius: 10px;
      border: 1px solid #ccc;
      font-size: 16px;
      outline: none;
      box-shadow: 0 2px 4px rgba(0,0,0,0.05);
    }

    .grid {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(360px, 1fr));
      gap: 1.5em;
    }

    .component-card {
      background: white;
      border-radius: 12px;
      padding: 1.5em;
      box-shadow: 0 4px 10px rgba(0,0,0,0.06);
      display: flex;
      flex-direction: column;
      gap: 0.8em;
      transition: transform 0.2s ease;
    }

    .component-card:hover {
      transform: translateY(-4px);
    }

    .tag {
      font-weight: bold;
      color: #444;
      font-family: monospace;
      font-size: 0.9em;
    }

    .preview, .props {
      height: 180px;
      overflow: auto;
      scrollbar-width: none;
      -ms-overflow-style: none;
      padding: 5px;
      border-radius: 10px;
    }

    .preview {
      border: 2px dashed #ddd;
      text-align: center;
      background: #fafafa;
      position: relative;
    }

    .preview::-webkit-scrollbar,
    .props::-webkit-scrollbar {
      display: none;
    }

    .props label {
      font-weight: 600;
      display: block;
      margin-top: 10px;
    }

    .props input, .props select {
      padding: 5px;
      border-radius: 6px;
      border: 1px solid #ccc;
      width: 100%;
      margin-top: 5px;
      box-sizing: border-box;
    }

    .copy-btn {
      align-self: flex-end;
      padding: 6px 10px;
      font-size: 14px;
      border: none;
      border-radius: 6px;
      background: #00bcd4;
      color: white;
      cursor: pointer;
      transition: 0.2s;
      margin-top: 8px;
    }

    .copy-btn:hover {
      background: #0097a7;
    }

    small {
      color: #777;
    }

    .image-inputs input {
      margin-bottom: 6px;
    }

    .add-image-btn {
      margin-top: 8px;
      padding: 6px 8px;
      font-size: 13px;
      border: none;
      border-radius: 6px;
      background: #e0e0e0;
      cursor: pointer;
    }

    .add-image-btn:hover {
      background: #ccc;
    }
  </style>
</head>
<body>
  <h1>üß© Menutech Component Playground</h1>

  <div class="search">
    <input type="text" id="searchInput" placeholder="Buscar componente... (ej. particles)">
  </div>

  <div class="grid" id="componentGrid">

    <!-- MENUTECH FORM -->
    <div class="component-card" data-name="menutech-form" data-type="ui">
      <div class="tag">&lt;menutech-form&gt;</div>
      <div class="preview">
        <menutech-form bg-color="#fff" label-color="#000" input-color="#000"
          placeholder-color="#555" button-color="#ff6600"
          button-text-color="#fff" max-width="400px"></menutech-form>
      </div>
      <div class="props">
        <label>Color de fondo</label>
        <input type="color" data-attr="bg-color" value="#fff">
        <label>Color de etiqueta</label>
        <input type="color" data-attr="label-color" value="#000">
        <label>Color de input</label>
        <input type="color" data-attr="input-color" value="#000">
        <label>Color placeholder</label>
        <input type="color" data-attr="placeholder-color" value="#555">
        <label>Color bot√≥n</label>
        <input type="color" data-attr="button-color" value="#ff6600">
        <label>Color texto bot√≥n</label>
        <input type="color" data-attr="button-text-color" value="#fff">
        <label>Ancho m√°ximo</label>
        <input type="text" data-attr="max-width" value="400px">
      </div>
      <button class="copy-btn">Copiar c√≥digo</button>
      <small>Formulario editable con colores y ancho configurables.</small>
    </div>

    <!-- MENUTECH PARTICLES -->
    <div class="component-card" data-name="menutech-particles" data-type="visual">
      <div class="tag">&lt;menutech-particles&gt;</div>
      <div class="preview">
        <menutech-particles color="#00bcd4" cantidad="40" tamano="4" velocidad="1" opacidad="0.6"></menutech-particles>
      </div>
      <div class="props">
        <label>Color</label>
        <input type="color" data-attr="color" value="#00bcd4">
        <label>Cantidad</label>
        <input type="number" data-attr="cantidad" value="40">
        <label>Tama√±o</label>
        <input type="number" data-attr="tamano" value="4">
        <label>Velocidad</label>
        <input type="number" step="0.1" data-attr="velocidad" value="1">
        <label>Opacidad</label>
        <input type="number" step="0.1" data-attr="opacidad" value="0.6">
      </div>
      <button class="copy-btn">Copiar c√≥digo</button>
      <small>Efecto visual animado de part√≠culas flotantes.</small>
    </div>

    <!-- MENUTECH GRADIENT -->
    <div class="component-card" data-name="menutech-gradient" data-type="visual">
      <div class="tag">&lt;menutech-gradient&gt;</div>
      <div class="preview">
        <menutech-gradient colors="#ff0000,#ff8800,#ffee00,#00ccff,#0066ff"
          speed="100s" angle="60deg" overlay-opacity="0.5" blur="5px"></menutech-gradient>
      </div>
      <div class="props">
        <label>Color 1</label>
        <input type="color" data-attr="color1" value="#ff0000">
        <label>Color 2</label>
        <input type="color" data-attr="color2" value="#ff8800">
        <label>Color 3</label>
        <input type="color" data-attr="color3" value="#ffee00">
        <label>Color 4</label>
        <input type="color" data-attr="color4" value="#00ccff">
        <label>Color 5</label>
        <input type="color" data-attr="color5" value="#0066ff">
        <label>Velocidad animaci√≥n</label>
        <input type="text" data-attr="speed" value="100s">
        <label>√Ångulo</label>
        <input type="text" data-attr="angle" value="60deg">
        <label>Opacidad overlay</label>
        <input type="number" step="0.1" data-attr="overlay-opacity" value="0.5">
        <label>Blur</label>
        <input type="text" data-attr="blur" value="5px">
      </div>
      <button class="copy-btn">Copiar c√≥digo</button>
      <small>Gradiente animado configurable con 5 colores.</small>
    </div>

    <!-- MENUTECH CARRUSEL -->
    <div class="component-card" data-name="menutech-carrusel" data-type="visual">
      <div class="tag">&lt;menutech-carrusel&gt;</div>
      <div class="preview">
        <menutech-carrusel></menutech-carrusel>
      </div>
      <div class="props">
        <label>Im√°genes del carrusel</label>
        <div class="image-inputs">
          <input type="text" placeholder="URL de imagen 1" data-attr="image1">
          <input type="text" placeholder="URL de imagen 2" data-attr="image2">
          <input type="text" placeholder="URL de imagen 3" data-attr="image3">
          <input type="text" placeholder="URL de imagen 4" data-attr="image4">
          <input type="text" placeholder="URL de imagen 5" data-attr="image5">
        </div>
        <button type="button" class="add-image-btn">+ Agregar imagen</button>

        <label>Ancho del slide</label>
        <input type="text" data-attr="slide-width" value="280px">

        <label>Alto del slide</label>
        <input type="text" data-attr="slide-height" value="380px">
      </div>

      <button class="copy-btn">Copiar c√≥digo</button>
      <small>Carrusel de im√°genes configurable y adaptable.</small>
    </div>

    <!-- MENUTECH NAVBAR (Neom√≥rfico) -->
   <div class="component-card" data-name="menutech-navbar" data-type="ui">
  <div class="tag">&lt;menutech-navbar&gt;</div>
  <div class="preview" style="height:90px; width: 100%;"> <!-- <- Aqu√≠ puedes cambiar width -->
    <menutech-navbar></menutech-navbar>
  </div>

  <div class="props">
    <label>Color de fondo</label>
    <input type="color" data-attr="color" value="">

    <label>Color de letra</label>
    <input type="color" data-attr="text-color" value="">

    <label>Color hover (solo sombra)</label>
    <input type="color" data-attr="hover-color" value="">

    <hr style="margin:10px 0">

    <input type="text" data-attr="text1" placeholder="Texto 1">
    <input type="text" data-attr="link1" placeholder="URL 1">

    <input type="text" data-attr="text2" placeholder="Texto 2">
    <input type="text" data-attr="link2" placeholder="URL 2">

    <input type="text" data-attr="text3" placeholder="Texto 3">
    <input type="text" data-attr="link3" placeholder="URL 3">

    <input type="text" data-attr="text4" placeholder="Texto 4">
    <input type="text" data-attr="link4" placeholder="URL 4">

    <input type="text" data-attr="text5" placeholder="Texto 5">
    <input type="text" data-attr="link5" placeholder="URL 5">
  </div>

  <button class="copy-btn">Copiar c√≥digo</button>
  <small>Barra de navegaci√≥n neom√≥rfica editable solo en colores y enlaces.</small>
</div>

  </div>
  <!-- ==================== EDITOR DE PLANTILLAS ==================== -->
<h2 style="margin-top:3em; text-align:center;">üìÑ Editor de Plantillas</h2>
<div style="max-width:960px;margin:1em auto;">
  <div style="display:flex; gap:10px; justify-content:center; margin-bottom:1em;">
    <button class="tab-btn" data-tab="1">Plantilla 1</button>
    <button class="tab-btn" data-tab="2">Plantilla 2</button>
    <button class="tab-btn" data-tab="3">Plantilla 3</button>
  </div>

  <div id="templateContainer" style="border:1px solid #ccc; border-radius:10px; overflow:hidden; height:500px; position:relative;">
    <iframe id="templateFrame" src="/templates/plantilla1.html" style="width:100%;height:100%;border:none;"></iframe>
  </div>

  <div style="margin-top:1em;">
    <label>Color de fondo</label>
    <input type="color" id="tplBgColor" style="width:100%;margin-bottom:8px;">

    <label>Logo URL</label>
    <input type="text" id="tplLogo" placeholder="URL de logo" style="width:100%;margin-bottom:8px;">

    <label>Texto Hero</label>
    <input type="text" id="tplHero" placeholder="Texto principal" style="width:100%;margin-bottom:8px;">

    <label>Descripci√≥n</label>
    <textarea id="tplDesc" placeholder="Descripci√≥n..." style="width:100%;margin-bottom:8px;"></textarea>

    <label>Horario</label>
    <input type="text" id="tplHorario" placeholder="Horario" style="width:100%;margin-bottom:8px;">

    <label>Tel√©fono</label>
    <input type="text" id="tplTel" placeholder="Tel√©fono" style="width:100%;margin-bottom:8px;">

    <label>Correo</label>
    <input type="text" id="tplCorreo" placeholder="Correo" style="width:100%;margin-bottom:8px;">

    <label>Galer√≠a de im√°genes</label>
    <input type="text" id="tplImg1" placeholder="Imagen 1" style="width:100%;margin-bottom:4px;">
    <input type="text" id="tplImg2" placeholder="Imagen 2" style="width:100%;margin-bottom:4px;">
    <input type="text" id="tplImg3" placeholder="Imagen 3" style="width:100%;margin-bottom:4px;">
    <input type="text" id="tplImg4" placeholder="Imagen 4" style="width:100%;margin-bottom:4px;">
    <input type="text" id="tplImg5" placeholder="Imagen 5" style="width:100%;margin-bottom:4px;">
    <input type="text" id="tplImg6" placeholder="Imagen 6" style="width:100%;margin-bottom:8px;">

    <button type="button" id="addMoreImages" style="padding:6px 8px;margin-bottom:8px;">+ Agregar m√°s fotos</button>

    <button id="tplCopy" style="padding:8px 12px; background:#00bcd4;color:#fff;border:none;border-radius:6px;cursor:pointer;">Copiar HTML</button>
  </div>
</div>

  <script>
    /* ================== EDITOR DE PLANTILLAS ================== */
const tabButtons = document.querySelectorAll(".tab-btn");
const iframe = document.getElementById("templateFrame");

/* Cambiar entre plantillas */
tabButtons.forEach(btn => {
  btn.addEventListener("click", () => {
    iframe.src = `/templates/plantilla${btn.dataset.tab}.html`;
    setTimeout(updateIframe, 500);
  });
});

/* Actualiza los campos dentro del iframe */
function updateIframe() {
  const doc = iframe.contentDocument || iframe.contentWindow.document;
  if (!doc) return;

  const bgColor = document.getElementById("tplBgColor").value;
  if (bgColor) doc.body.style.backgroundColor = bgColor;

  const logo = document.getElementById("tplLogo").value.trim();
  if (doc.getElementById("logo")) doc.getElementById("logo").src = logo || "";

  const hero = document.getElementById("tplHero").value.trim();
  if (doc.getElementById("hero")) doc.getElementById("hero").textContent = hero;

  const desc = document.getElementById("tplDesc").value.trim();
  if (doc.getElementById("desc")) doc.getElementById("desc").textContent = desc;

  const horario = document.getElementById("tplHorario").value.trim();
  if (doc.getElementById("horario")) doc.getElementById("horario").textContent = horario;

  const tel = document.getElementById("tplTel").value.trim();
  if (doc.getElementById("tel")) doc.getElementById("tel").textContent = tel;

  const correo = document.getElementById("tplCorreo").value.trim();
  if (doc.getElementById("correo")) doc.getElementById("correo").textContent = correo;

  /* Galer√≠a */
  if (doc.getElementById("galeria")) {
    const gal = doc.getElementById("galeria");
    gal.innerHTML = "";

    for (let i = 1; i <= 6; i++) {
      const val = document.getElementById("tplImg" + i).value.trim();
      if (val) gal.innerHTML += `<img src="${val}" style="width:100px;margin:2px;">`;
    }

    const extraInputs = document.querySelectorAll(".extra-img");
    extraInputs.forEach(inp => {
      if (inp.value.trim()) gal.innerHTML += `<img src="${inp.value.trim()}" style="width:100px;margin:2px;">`;
    });
  }
}

/* Vincular todos los inputs a la funci√≥n de actualizaci√≥n */
document.querySelectorAll(`
  #tplBgColor,
  #tplLogo,
  #tplHero,
  #tplDesc,
  #tplHorario,
  #tplTel,
  #tplCorreo,
  #tplImg1,
  #tplImg2,
  #tplImg3,
  #tplImg4,
  #tplImg5,
  #tplImg6
`).forEach(inp => inp.addEventListener("input", updateIframe));

/* Agregar nuevos campos para im√°genes extra */
document.getElementById("addMoreImages").addEventListener("click", () => {
  const newInput = document.createElement("input");
  newInput.type = "text";
  newInput.placeholder = "Nueva imagen";
  newInput.classList.add("extra-img");
  newInput.style.width = "100%";
  newInput.style.marginBottom = "4px";
  document.getElementById("addMoreImages").insertAdjacentElement("beforebegin", newInput);
  newInput.addEventListener("input", updateIframe);
});

/* Copiar HTML completo */
document.getElementById("tplCopy").addEventListener("click", () => {
  const doc = iframe.contentDocument || iframe.contentWindow.document;
  const html = doc.documentElement.outerHTML;
  navigator.clipboard.writeText(html);
  alert("HTML copiado al portapapeles ‚úÖ");
});

/* Esperar a que cargue el iframe */
iframe.addEventListener("load", updateIframe);
     // ===================================================================================================
    /* === CUSTOM ELEMENTS === */
    // menutech-navbar
    class MenutechNavbar extends HTMLElement {
  constructor() {
    super();
    this.shadow = this.attachShadow({mode:"open"});
    this.render();
  }

  static get observedAttributes() {
    return ["color","text-color","hover-color",
            "link1","link2","link3","link4","link5",
            "text1","text2","text3","text4","text5"];
  }

  attributeChangedCallback() { this.render(); }

  render() {
    const color = this.getAttribute("color") || "#e0e0e0";
    const textColor = this.getAttribute("text-color") || "#444";
    const hoverColor = this.getAttribute("hover-color") || "#00bcd4";

    const links = [
      this.getAttribute("link1") || "#",
      this.getAttribute("link2") || "#",
      this.getAttribute("link3") || "#",
      this.getAttribute("link4") || "#",
      this.getAttribute("link5") || "#"
    ];

    const texts = [
      this.getAttribute("text1") || "Home",
      this.getAttribute("text2") || "Services",
      this.getAttribute("text3") || "Gallery",
      this.getAttribute("text4") || "Contact",
      this.getAttribute("text5") || ""
    ];

    const previewLinks = texts.map((t,i)=>t ? `<a href="${links[i]}">${t}</a>` : "").filter(a=>a!=="");

    this.shadow.innerHTML = `
      <style>
        :host { display:block; width:100%; height:100%; }
        nav {
          display:flex;
          justify-content: space-between;
          align-items:center;
          background: ${color};
          padding:14px 20px;
          border-radius:35px;
          box-shadow: 8px 8px 16px rgba(0,0,0,0.15), -8px -8px 16px rgba(255,255,255,0.9);
          backdrop-filter: blur(10px);
          width: 100%;
          height: 100%;
          box-sizing: border-box;
        }
        a {
          flex:1;
          text-align:center;
          text-decoration:none;
          color:${textColor};
          font-size:0.9rem;
          font-weight:500;
          padding:10px 0;
          border-radius:18px;
          background: rgba(255,255,255,0.1);
          box-shadow: inset 2px 2px 4px rgba(255,255,255,0.6), inset -2px -2px 4px rgba(190,190,190,0.5);
          transition: all 0.25s ease;
          margin:0 4px;
        }
        a:hover {
          box-shadow: inset 4px 4px 8px ${hoverColor}, inset -4px -4px 8px ${hoverColor};
        }
      </style>
      <nav>${previewLinks.join("")}</nav>
    `;
  }
}
customElements.define("menutech-navbar", MenutechNavbar);

// Interactividad tarjeta
const navbarCard = document.querySelector('[data-name="menutech-navbar"]');
if(navbarCard){
  const preview = navbarCard.querySelector(".preview").firstElementChild;
  const inputs = navbarCard.querySelectorAll("[data-attr]");
  const copyBtn = navbarCard.querySelector(".copy-btn");

  // Actualiza los atributos en tiempo real
  inputs.forEach(input => {
    input.addEventListener("input", e=>{
      const value = e.target.value;
      if (value.trim() !== "") {
        preview.setAttribute(input.dataset.attr, value);
      } else {
        preview.removeAttribute(input.dataset.attr);
      }
    });
  });

  // Copiar c√≥digo con todos los atributos editables
  copyBtn.addEventListener("click", ()=>{
    const previewEl = navbarCard.querySelector("menutech-navbar");

    // Incluye todos los atributos configurables
    const attrs = Array.from(previewEl.attributes)
      .filter(a => [
        "color","opacity",
        "link1","link2","link3","link4","link5",
        "text1","text2","text3","text4","text5"
      ].includes(a.name) && a.value.trim() !== "");

    // Si el usuario no cambi√≥ nada, deja la etiqueta limpia
    const code = attrs.length 
      ? `<menutech-navbar ${attrs.map(a=>`${a.name}="${a.value}"`).join(" ")}></menutech-navbar>` 
      : `<menutech-navbar></menutech-navbar>`;

    navigator.clipboard.writeText(code);
    copyBtn.textContent = "¬°Copiado!";
    setTimeout(()=>copyBtn.textContent="Copiar c√≥digo",1500);
  });
}
  // end menutech-navbar

    class MenutechForm extends HTMLElement {
      static get observedAttributes() { return ["bg-color","label-color","input-color","placeholder-color","button-color","button-text-color","max-width"]; }
      constructor() { super(); this.attachShadow({mode:"open"}); this.render(); }
      attributeChangedCallback() { this.render(); }
      render() {
        const bg = this.getAttribute("bg-color") || "#fff";
        const label = this.getAttribute("label-color") || "#000";
        const inputC = this.getAttribute("input-color") || "#000";
        const placeholder = this.getAttribute("placeholder-color") || "#555";
        const btnBg = this.getAttribute("button-color") || "#ff6600";
        const btnText = this.getAttribute("button-text-color") || "#fff";
        const maxW = this.getAttribute("max-width") || "400px";

        this.shadowRoot.innerHTML = `
          <style>
            :host { display:block; width:100%; height:100%; }
            form {
              background:${bg};
              padding:1em;
              border-radius:10px;
              max-width:${maxW};
              margin:auto;
              display:flex;
              flex-direction:column;
              gap:0.8em;
            }
            label { color:${label}; font-weight:600; }
            input { color:${inputC}; border:1px solid #ccc; border-radius:6px; padding:5px; }
            input::placeholder { color:${placeholder}; }
            button {
              background:${btnBg};
              color:${btnText};
              border:none;
              padding:6px 10px;
              border-radius:6px;
              cursor:pointer;
            }
          </style>
          <form>
            <label>Nombre</label>
            <input type="text" placeholder="Escribe tu nombre">
            <label>Email</label>
            <input type="email" placeholder="Escribe tu email">
            <button>Enviar</button>
          </form>
        `;
      }
    }
    customElements.define("menutech-form", MenutechForm);

    class MenutechParticles extends HTMLElement {
      static get observedAttributes() { return ["color","cantidad","tamano","velocidad","opacidad"]; }
      constructor() { super(); this.attachShadow({mode:"open"}); this.render(); }
      attributeChangedCallback() { this.render(); }

      render() {
        const color = this.getAttribute("color") || "#00bcd4";
        const cantidad = parseInt(this.getAttribute("cantidad")) || 30;
        const tamano = parseFloat(this.getAttribute("tamano")) || 4;
        const velocidad = parseFloat(this.getAttribute("velocidad")) || 1;
        const opacidad = parseFloat(this.getAttribute("opacidad")) || 0.6;

        let dots = "";
        for(let i=0;i<cantidad;i++){
          const x = Math.random()*100;
          const y = Math.random()*100;
          const size = tamano + Math.random()*tamano;
          const dur = 4 + Math.random()*3;
          const delay = Math.random()*2;
          dots += `<div class="dot" style="left:${x}%; top:${y}%; width:${size}px; height:${size}px; animation-duration:${dur/velocidad}s; animation-delay:${delay}s;"></div>`;
        }

        this.shadowRoot.innerHTML=`
          <style>
            :host {
              display:block;
              position:relative;
              width:100%;
              height:100%;
              overflow:hidden;
            }
            .dot {
              position:absolute;
              background:${color};
              border-radius:50%;
              opacity:${opacidad};
              animation:float ease-in-out infinite;
            }
            @keyframes float {
              0%,100% { transform:translateY(0); }
              50% { transform:translateY(-15px); }
            }
          </style>
          ${dots}
        `;
      }
    }
    customElements.define("menutech-particles", MenutechParticles);

    class MenutechGradient extends HTMLElement {
      static get observedAttributes() { return ["color1","color2","color3","color4","color5","speed","angle","overlay-opacity","blur"]; }
      constructor() { super(); this.attachShadow({mode:"open"}); this.render(); }
      attributeChangedCallback() { this.render(); }
      render() {
        const colors = [
          this.getAttribute("color1") || "#ff0000",
          this.getAttribute("color2") || "#ff8800",
          this.getAttribute("color3") || "#ffee00",
          this.getAttribute("color4") || "#00ccff",
          this.getAttribute("color5") || "#0066ff"
        ];
        const speed = this.getAttribute("speed") || "100s";
        const angle = this.getAttribute("angle") || "60deg";
        const overlay = this.getAttribute("overlay-opacity") || "0.5";
        const blur = this.getAttribute("blur") || "5px";

        this.shadowRoot.innerHTML=`
          <style>
            :host {
              display:block;
              width:100%;
              height:100%;
              border-radius:10px;
              overflow:hidden;
              position:relative;
            }
            .grad{
              width:100%;
              height:100%;
              background: linear-gradient(${angle}, ${colors.join(",")});
              background-size: 400% 400%;
              animation: gradAnim ${speed} ease infinite;
              filter: blur(${blur});
              transition: background 0.5s ease;
            }
            .overlay{
              position:absolute;
              top:0;left:0;width:100%;height:100%;
              background:rgba(0,0,0,${overlay});
            }
            @keyframes gradAnim{
              0%{background-position:0% 50%;}
              50%{background-position:100% 50%;}
              100%{background-position:0% 50%;}
            }
          </style>
          <div class="grad"></div>
          <div class="overlay"></div>
        `;
      }
    }
    customElements.define("menutech-gradient", MenutechGradient);

    class MenutechCarrusel extends HTMLElement {
      static get observedAttributes() { return ["images","slide-width","slide-height"]; }
      constructor() { super(); this.attachShadow({mode:"open"}); this.render(); }
      attributeChangedCallback() { this.render(); }

      render() {
        const defaultImgs = [
          "https://placehold.co/600x400",
          "https://placehold.co/600x400/FF0000/FFF",
          "https://placehold.co/600x400/00FF00/000"
        ];
        const raw = this.getAttribute("images");
        const imgs = raw ? raw.split(",").map(s => s.trim()).filter(Boolean) : defaultImgs.slice();
        const width = this.getAttribute("slide-width") || "280px";
        const height = this.getAttribute("slide-height") || "380px";

        this.shadowRoot.innerHTML = `
          <style>
            :host {
              display:block;
              width:100%;
              height:100%;
              border-radius:10px;
              overflow:hidden;
              position:relative;
              box-sizing:border-box;
              padding:8px;
            }
            .carousel {
              display:flex;
              gap:10px;
              align-items:center;
              height:100%;
              overflow-x:auto;
              scroll-behavior:smooth;
            }
            .carousel::-webkit-scrollbar{ display:none; }
            .carousel img {
              width:${width};
              height:${height};
              object-fit:cover;
              border-radius:10px;
              flex-shrink:0;
              cursor:pointer;
              transition:transform .3s ease;
            }
            .carousel img:hover { transform:scale(1.05); }
          </style>
          <div class="carousel">
            ${imgs.map(i => `<img src="${i}" loading="lazy" data-src="${i}">`).join("")}
          </div>
        `;

        const imgsEls = Array.from(this.shadowRoot.querySelectorAll("img"));
        imgsEls.forEach(imgEl => {
          imgEl.addEventListener("click", () => {
            window.open(imgEl.getAttribute("data-src"), "_blank");
          });
        });
      }
    }
    customElements.define("menutech-carrusel", MenutechCarrusel);

    /* === INTERACTIVIDAD === */
    document.querySelectorAll(".component-card").forEach(card => {
      const preview = card.querySelector(".preview").firstElementChild;
      const inputs = card.querySelectorAll("[data-attr]");
      const copyBtn = card.querySelector(".copy-btn");

      inputs.forEach(input => {
        input.addEventListener("input", e => {
          const name = input.dataset.attr;
          if (/^image\d+$/.test(name)) {
            const container = card.querySelector(".image-inputs");
            const urls = Array.from(container.querySelectorAll("input"))
              .map(inp => inp.value.trim())
              .filter(v => v);
            if (urls.length) preview.setAttribute("images", urls.join(","));
            else preview.removeAttribute("images");
            return;
          }
          preview.setAttribute(name, e.target.value);
        });
      });

      copyBtn.addEventListener("click", () => {
        const tag = preview.tagName.toLowerCase();
        const attrs = Array.from(preview.attributes).map(a => `${a.name}="${a.value}"`).join(" ");
        const code = `<${tag} ${attrs}></${tag}>`;
        navigator.clipboard.writeText(code);
        copyBtn.textContent = "¬°Copiado!";
        setTimeout(() => copyBtn.textContent = "Copiar c√≥digo", 1500);
      });

      const addBtn = card.querySelector(".add-image-btn");
      if (addBtn) {
        addBtn.addEventListener("click", () => {
          const container = card.querySelector(".image-inputs");
          const nextIndex = container.querySelectorAll("input").length + 1;
          const input = document.createElement("input");
          input.type = "text";
          input.placeholder = `URL de imagen ${nextIndex}`;
          input.dataset.attr = `image${nextIndex}`;
          container.appendChild(input);

          input.addEventListener("input", (e) => {
            const urls = Array.from(container.querySelectorAll("input"))
              .map(inp => inp.value.trim())
              .filter(v => v);
            if (urls.length) preview.setAttribute("images", urls.join(","));
            else preview.removeAttribute("images");
          });
        });
      }
    });

    const search = document.getElementById("searchInput");
    const grid = document.getElementById("componentGrid");
    search.addEventListener("input", () => {
      const q = search.value.toLowerCase();
      grid.querySelectorAll(".component-card").forEach(card => {
        const name = card.dataset.name.toLowerCase();
        card.style.display = name.includes(q) ? "" : "none";
      });
    });
  </script>
</body>
</html>






